<%= form_for(registration) do |f| %>
  <% if registration.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(registration.errors.count, "error") %> prohibited this registration from being saved:</h2>

      <ul>
      <% registration.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


  <%= f.label :person %>
  <input id="person" class="typeahead" type="text" placeholder="States of USA">
  <%#= @registration.person.name_lf   %>

  <%= f.hidden_field :person_id, :value=>@registration.person_id  %>
  <br/>
  <%= f.label :type %>
  <%= f.select :reg_type, %w{Clubber Leader} %>
  <br/>
  <%= f.label :group_assignment %>
  <%= f.select :group_assignment, %w{1st-6th 3-5s} %>
  <br/>
  <%= f.label :table_assignment %>
  <%= f.select :table_assignment, (1..12) %>
  <br/>
  <%= f.label :sessionyear %>
  <%= f.select :sessionyear_id,  Sessionyear.vals_for_select %>
  <br/>
  <%#= f.label :background_check %>
  <%#= f.label :k4t_form %>
  <%#= f.label :k4t_pols_procs %>
  <%#= f.label :tbc_form %>
  <div class="actions">
    <%= f.submit %>
  </div>

  <script>

var substringMatcher = function(strs) {
  return function findMatches(q, cb) {
    var matches, substringRegex;

    // an array that will be populated with substring matches
    matches = [];

    // regex used to determine if a string contains the substring `q`
    substrRegex = new RegExp(q, 'i');

    // iterate through the pool of strings and for any string that
    // contains the substring `q`, add it to the `matches` array
    $.each(strs, function(i, str) {
      if (substrRegex.test(str)) {
        matches.push(str);
      }
    });

    cb(matches);
  };
};


    var states = ['Nebraska', 'Virginia'];
    $(document).ready(function() {
      $('#person').typeahead({
        hint: true,
        highlight: true,
        minLength: 1
      },
      {
        name: 'person',
        source: substringMatcher(states)
      });
    });
  </script>
<% end %>
